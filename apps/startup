#!/bin/sh

set -eu

# Compose files use 'restart: on-failure' (not 'unless-stopped') because Docker's
# auto-restart bypasses 'depends_on'. Systemd calls this script to honor dependencies.

root="$(dirname "$(realpath "$0")")"

for app_path in "$root/"*'/'; do
    docker compose --project-directory "$app_path" up --detach
done
